{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Trant\\\\Documents\\\\L\\u1EADp Tr\\xECnh Web\\\\CTES WEB\\\\React - Copy\\\\src\\\\containers\\\\System\\\\EventRegistrationManage.js\";\nimport React, { Component } from \"react\";\nimport { FaEdit, FaTrash } from \"react-icons/fa\";\nimport { connect } from \"react-redux\";\nimport \"./EventRegistrationManage.scss\";\nimport ModalEditUser from \"./ModalUser\";\nimport { getEventRegistrationsById } from \"../../services/eventServices\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass EventRegistrationManage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      registrations: [],\n      isLoading: false\n    };\n  }\n  async componentDidMount() {\n    var _this$props$match, _this$props$match$par;\n    // Lấy eventId từ URL (React Router v5: this.props.match.params, v6: this.props.params hoặc useParams)\n    const eventId = ((_this$props$match = this.props.match) === null || _this$props$match === void 0 ? void 0 : (_this$props$match$par = _this$props$match.params) === null || _this$props$match$par === void 0 ? void 0 : _this$props$match$par.id) || this.props.eventId;\n    if (!eventId) {\n      toast.error(\"Không tìm thấy sự kiện!\");\n      return;\n    }\n    this.setState({\n      isLoading: true\n    });\n    try {\n      const res = await getEventRegistrationsById(eventId);\n      // Kiểm tra kết quả trả về bằng console.log(res);\n      console.log(\"Event Registrations Response:\", res);\n      if (res && res.data && res.data.errCode === 0) {\n        this.setState({\n          registrations: res.data.d,\n          isLoading: false\n        });\n      } else {\n        toast.error(res.data.errMessage || \"Lỗi khi tải danh sách đăng ký\");\n        this.setState({\n          isLoading: false\n        });\n      }\n    } catch (e) {\n      toast.error(\"Không thể kết nối máy chủ\");\n      this.setState({\n        isLoading: false\n      });\n    }\n  }\n  render() {\n    const {\n      registrations,\n      isLoading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"event-registration-manage-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title\",\n        children: \"Qu\\u1EA3n l\\xFD \\u0111\\u0103ng k\\xFD s\\u1EF1 ki\\u1EC7n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"event-registration-manage-content\",\n        children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"\\u0110ang t\\u1EA3i d\\u1EEF li\\u1EC7u...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-striped\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"#\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 53,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"H\\u1ECD t\\xEAn\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 54,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 56,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Ng\\xE0y \\u0111\\u0103ng k\\xFD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Tr\\u1EA1ng th\\xE1i\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: registrations && registrations.length > 0 ? registrations.map((item, idx) => {\n              var _item$user, _item$user2, _item$user3, _item$user4;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: idx + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 65,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [(_item$user = item.user) === null || _item$user === void 0 ? void 0 : _item$user.firstName, \" \", (_item$user2 = item.user) === null || _item$user2 === void 0 ? void 0 : _item$user2.lastName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 66,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: (_item$user3 = item.user) === null || _item$user3 === void 0 ? void 0 : _item$user3.email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 67,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: (_item$user4 = item.user) === null || _item$user4 === void 0 ? void 0 : _item$user4.phoneNumber\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 68,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.createdAt ? new Date(item.createdAt).toLocaleString() : \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.status === \"approved\" ? \"Đã duyệt\" : item.status === \"pending\" ? \"Chờ duyệt\" : \"Từ chối\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 45\n                }, this)]\n              }, item.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 41\n              }, this);\n            }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"6\",\n                className: \"text-center\",\n                children: \"Ch\\u01B0a c\\xF3 ai \\u0111\\u0103ng k\\xFD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this);\n  }\n}\nconst mapStateToProps = state => {\n  return {};\n};\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(EventRegistrationManage);","map":{"version":3,"names":["React","Component","FaEdit","FaTrash","connect","ModalEditUser","getEventRegistrationsById","toast","jsxDEV","_jsxDEV","EventRegistrationManage","constructor","props","state","registrations","isLoading","componentDidMount","_this$props$match","_this$props$match$par","eventId","match","params","id","error","setState","res","console","log","data","errCode","d","errMessage","e","render","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","item","idx","_item$user","_item$user2","_item$user3","_item$user4","user","firstName","lastName","email","phoneNumber","createdAt","Date","toLocaleString","status","colSpan","mapStateToProps","mapDispatchToProps","dispatch"],"sources":["C:/Users/Trant/Documents/Lập Trình Web/CTES WEB/React - Copy/src/containers/System/EventRegistrationManage.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport { FaEdit, FaTrash } from \"react-icons/fa\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./EventRegistrationManage.scss\";\r\nimport ModalEditUser from \"./ModalUser\";\r\nimport {getEventRegistrationsById} from \"../../services/eventServices\";\r\nimport { toast } from \"react-toastify\";\r\nclass EventRegistrationManage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            registrations: [],\r\n            isLoading: false,\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        // Lấy eventId từ URL (React Router v5: this.props.match.params, v6: this.props.params hoặc useParams)\r\n        const eventId = this.props.match?.params?.id || this.props.eventId;\r\n        if (!eventId) {\r\n            toast.error(\"Không tìm thấy sự kiện!\");\r\n            return;\r\n        }\r\n        this.setState({ isLoading: true });\r\n        try {\r\n            const res = await getEventRegistrationsById(eventId);\r\n            // Kiểm tra kết quả trả về bằng console.log(res);\r\n            console.log(\"Event Registrations Response:\", res);\r\n            if (res && res.data && res.data.errCode === 0) {\r\n                this.setState({ registrations: res.data.d, isLoading: false });\r\n            } else {\r\n                toast.error(res.data.errMessage || \"Lỗi khi tải danh sách đăng ký\");\r\n                this.setState({ isLoading: false });\r\n            }\r\n        } catch (e) {\r\n            toast.error(\"Không thể kết nối máy chủ\");\r\n            this.setState({ isLoading: false });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { registrations, isLoading } = this.state;\r\n        return (\r\n            <div className=\"event-registration-manage-container\">\r\n                <div className=\"title\">Quản lý đăng ký sự kiện</div>\r\n                <div className=\"event-registration-manage-content\">\r\n                    {isLoading ? (\r\n                        <div>Đang tải dữ liệu...</div>\r\n                    ) : (\r\n                        <table className=\"table table-striped\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>#</th>\r\n                                    <th>Họ tên</th>\r\n                                    <th>Email</th>\r\n                                    <th>Số điện thoại</th>\r\n                                    <th>Ngày đăng ký</th>\r\n                                    <th>Trạng thái</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {registrations && registrations.length > 0 ? (\r\n                                    registrations.map((item, idx) => (\r\n                                        <tr key={item.id}>\r\n                                            <td>{idx + 1}</td>\r\n                                            <td>{item.user?.firstName} {item.user?.lastName}</td>\r\n                                            <td>{item.user?.email}</td>\r\n                                            <td>{item.user?.phoneNumber}</td>\r\n                                            <td>{item.createdAt ? new Date(item.createdAt).toLocaleString() : \"\"}</td>\r\n                                            <td>{item.status === \"approved\" ? \"Đã duyệt\" : item.status === \"pending\" ? \"Chờ duyệt\" : \"Từ chối\"}</td>\r\n                                        </tr>\r\n                                    ))\r\n                                ) : (\r\n                                    <tr>\r\n                                        <td colSpan=\"6\" className=\"text-center\">Chưa có ai đăng ký</td>\r\n                                    </tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EventRegistrationManage);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}