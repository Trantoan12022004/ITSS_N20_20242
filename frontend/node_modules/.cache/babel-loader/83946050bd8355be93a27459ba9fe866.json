{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Trant\\\\Documents\\\\L\\u1EADp Tr\\xECnh Web\\\\5.font-end-react-fullstack\\\\React\\\\src\\\\containers\\\\System\\\\UserManage.js\";\nimport React, { Component } from \"react\";\nimport { FaEdit, FaTrash } from \"react-icons/fa\";\nimport { connect } from \"react-redux\";\nimport \"./UserManage.scss\";\nimport { getAllUsers, deleteUser, updateUser } from \"../../services/userServices\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass UserManage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchAllUsers = async () => {\n      let response = await getAllUsers(\"ALL\");\n\n      if (response && response.data && response.data.errCode === 0) {\n        this.setState({\n          arrUsers: response.data.users\n        });\n      }\n    };\n\n    this.handleDeleteUser = async userId => {\n      let response = await deleteUser(userId);\n\n      if (response && response.data.errCode === 0) {\n        await this.fetchAllUsers();\n      } else {\n        alert(response.data.errMessage);\n      }\n    };\n\n    this.handleEditUser = user => {\n      this.setState({\n        userIdToEdit: user.id,\n        userEditData: {\n          firstName: user.firstName,\n          lastName: user.lastName,\n          email: user.email,\n          address: user.address\n        }\n      });\n    };\n\n    this.handleChangeUserEditData = event => {\n      // Lấy giá trị từ trường nhập liệu\n      let inputName = event.target.name;\n      let inputValue = event.target.value; // Tạo 1 bản sao cho obj userEditData\n\n      let updateUserEditData = { ...this.state.userEditData\n      }; // Cập nhập lại giá trị nhập vào so với dữ liệu ban đầu\n\n      updateUserEditData[inputName] = inputValue; // Cập nhật lại state\n\n      this.setState({\n        userEditData: updateUserEditData\n      });\n    };\n\n    this.handleSaveUserEdit = async () => {\n      // lấy dữ liệu từ state\n      let {\n        userIdToEdit,\n        userEditData\n      } = this.state; // Tạo đối tượng dữ liệu ID và thông tin người dùng\n\n      let data = {\n        id: userIdToEdit,\n        ...userEditData\n      }; // Gửi yêu cầu thông tin người dùng lên server\n\n      let response = await updateUser(data); // Kiểm tra phản hồi từ sever\n\n      if (response && response.data.errCode === 0) {\n        await this.fetchAllUsers(); // resret\n\n        this.setState({\n          userIdToEdit: null,\n          userEditData: {\n            firstName: '',\n            lastName: '',\n            email: '',\n            address: ''\n          }\n        });\n      } else {\n        alert(response.data.errMessage);\n      }\n    };\n\n    this.state = {\n      arrUsers: [],\n      userIdToEdit: null,\n      userEditData: {\n        firstName: '',\n        lastName: '',\n        email: '',\n        address: ''\n      }\n    };\n  }\n\n  async componentDidMount() {\n    await this.fetchAllUsers();\n  }\n\n  render() {\n    let {\n      arrUsers,\n      userEditData\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title text-center\",\n        children: \"Manage user with anhtonton\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-table mt-4 mx-3\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-striped table-hover table-bordered\",\n          id: \"customers\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"thead-dark custom-header\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  width: \"25%\"\n                },\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  width: \"20%\"\n                },\n                children: \"Firstname\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  width: \"20%\"\n                },\n                children: \"Lastname\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  width: \"25%\"\n                },\n                children: \"Address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  width: \"10%\"\n                },\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: arrUsers && arrUsers.length > 0 && arrUsers.map((user, index) => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: user.email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: user.firstName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: user.lastName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: user.address\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn\",\n                    onClick: () => this.handleEditUser(user),\n                    children: /*#__PURE__*/_jsxDEV(FaEdit, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 125,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn\",\n                    onClick: () => this.handleDeleteUser(user.id),\n                    children: /*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 128,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 45\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 41\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), this.state.userIdToEdit !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-edit-form mt-4 mx-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Edit User Information\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"First Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              name: \"firstName\",\n              value: userEditData.firstName,\n              onChange: this.handleChangeUserEditData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Last Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              name: \"lastName\",\n              value: userEditData.lastName,\n              onChange: this.handleChangeUserEditData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              className: \"form-control\",\n              name: \"email\",\n              value: userEditData.email,\n              onChange: this.handleChangeUserEditData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Address:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              name: \"address\",\n              value: userEditData.address,\n              onChange: this.handleChangeUserEditData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-primary\",\n            onClick: this.handleSaveUserEdit,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {};\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserManage);","map":{"version":3,"sources":["C:/Users/Trant/Documents/Lập Trình Web/5.font-end-react-fullstack/React/src/containers/System/UserManage.js"],"names":["React","Component","FaEdit","FaTrash","connect","getAllUsers","deleteUser","updateUser","UserManage","constructor","props","fetchAllUsers","response","data","errCode","setState","arrUsers","users","handleDeleteUser","userId","alert","errMessage","handleEditUser","user","userIdToEdit","id","userEditData","firstName","lastName","email","address","handleChangeUserEditData","event","inputName","target","name","inputValue","value","updateUserEditData","state","handleSaveUserEdit","componentDidMount","render","width","length","map","index","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { FaEdit, FaTrash } from \"react-icons/fa\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./UserManage.scss\";\r\nimport { getAllUsers, deleteUser, updateUser } from \"../../services/userServices\";\r\n\r\nclass UserManage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            arrUsers: [],\r\n            userIdToEdit: null,\r\n            userEditData: {\r\n                firstName: '',\r\n                lastName: '',\r\n                email: '',\r\n                address: ''\r\n            }\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.fetchAllUsers();\r\n    }\r\n\r\n    fetchAllUsers = async () => {\r\n        let response = await getAllUsers(\"ALL\");\r\n        if (response && response.data && response.data.errCode === 0) {\r\n            this.setState({\r\n                arrUsers: response.data.users,\r\n            });\r\n        }\r\n    }\r\n\r\n    handleDeleteUser = async (userId) => {\r\n        let response = await deleteUser(userId);\r\n        if (response && response.data.errCode === 0) {\r\n            await this.fetchAllUsers();\r\n        } else {\r\n            alert(response.data.errMessage);\r\n        }\r\n    };\r\n\r\n    handleEditUser = (user) => {\r\n        this.setState({\r\n            userIdToEdit: user.id,\r\n            userEditData: {\r\n                firstName: user.firstName,\r\n                lastName: user.lastName,\r\n                email: user.email,\r\n                address: user.address\r\n            }\r\n        });\r\n    };\r\n\r\n    handleChangeUserEditData = (event) => {\r\n        // Lấy giá trị từ trường nhập liệu\r\n        let inputName = event.target.name;\r\n        let inputValue = event.target.value;\r\n        // Tạo 1 bản sao cho obj userEditData\r\n        let updateUserEditData = { ...this.state.userEditData };\r\n        // Cập nhập lại giá trị nhập vào so với dữ liệu ban đầu\r\n        updateUserEditData[inputName] = inputValue;\r\n        // Cập nhật lại state\r\n        this.setState({\r\n            userEditData: updateUserEditData\r\n            });\r\n    };\r\n\r\n    handleSaveUserEdit = async () => {\r\n        // lấy dữ liệu từ state\r\n        let { userIdToEdit, userEditData } = this.state;\r\n        // Tạo đối tượng dữ liệu ID và thông tin người dùng\r\n        let data = {\r\n            id: userIdToEdit,\r\n            ...userEditData\r\n        };\r\n        // Gửi yêu cầu thông tin người dùng lên server\r\n        let response = await updateUser(data);\r\n        // Kiểm tra phản hồi từ sever\r\n        if (response && response.data.errCode === 0) {\r\n            await this.fetchAllUsers();\r\n            // resret\r\n            this.setState({\r\n                userIdToEdit: null,\r\n                userEditData: {\r\n                    firstName: '',\r\n                    lastName: '',\r\n                    email: '',\r\n                    address: ''\r\n                }\r\n            });\r\n        } else {\r\n            alert(response.data.errMessage);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        let { arrUsers, userEditData } = this.state;\r\n        return (\r\n            <div className=\"user-center\">\r\n                <div className=\"title text-center\">Manage user with anhtonton</div>\r\n                <div className=\"user-table mt-4 mx-3\">\r\n                    <table className=\"table table-striped table-hover table-bordered\" id=\"customers\">\r\n                        <thead className=\"thead-dark custom-header\">\r\n                            <tr>\r\n                                <th style={{ width: \"25%\" }}>Email</th>\r\n                                <th style={{ width: \"20%\" }}>Firstname</th>\r\n                                <th style={{ width: \"20%\" }}>Lastname</th>\r\n                                <th style={{ width: \"25%\" }}>Address</th>\r\n                                <th style={{ width: \"10%\" }}>Action</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {arrUsers && arrUsers.length > 0 &&\r\n                                arrUsers.map((user, index) => {\r\n                                    return (\r\n                                        <tr key={index}>\r\n                                            <td>{user.email}</td>\r\n                                            <td>{user.firstName}</td>\r\n                                            <td>{user.lastName}</td>\r\n                                            <td>{user.address}</td>\r\n                                            <td>\r\n                                                <button className=\"btn\" onClick={() => this.handleEditUser(user)}>\r\n                                                    <FaEdit />\r\n                                                </button>\r\n                                                <button className=\"btn\" onClick={() => this.handleDeleteUser(user.id)}>\r\n                                                    <FaTrash />\r\n                                                </button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                {this.state.userIdToEdit !== null && (\r\n                    <div className=\"user-edit-form mt-4 mx-3\">\r\n                        <h3>Edit User Information</h3>\r\n                        <form>\r\n                            <div className=\"form-group\">\r\n                                <label>First Name:</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"form-control\"\r\n                                    name=\"firstName\"\r\n                                    value={userEditData.firstName}\r\n                                    onChange={this.handleChangeUserEditData}\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label>Last Name:</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"form-control\"\r\n                                    name=\"lastName\"\r\n                                    value={userEditData.lastName}\r\n                                    onChange={this.handleChangeUserEditData}\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label>Email:</label>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    className=\"form-control\"\r\n                                    name=\"email\"\r\n                                    value={userEditData.email}\r\n                                    onChange={this.handleChangeUserEditData}\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label>Address:</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"form-control\"\r\n                                    name=\"address\"\r\n                                    value={userEditData.address}\r\n                                    onChange={this.handleChangeUserEditData}\r\n                                />\r\n                            </div>\r\n                            <button type=\"button\" className=\"btn btn-primary\" onClick={this.handleSaveUserEdit}>Save</button>\r\n                        </form>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {};\r\n};\r\n\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserManage);\r\n"]},"metadata":{},"sourceType":"module"}